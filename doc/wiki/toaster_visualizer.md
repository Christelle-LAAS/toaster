## How to use
To start the toaster_visualizer ros node, run the following command on terminal -

```shell
> rosrun toaster_visualizer
```

To visualize you need to launch rviz as well:

```shell
> rosrun rviz rviz
```

## Description
To understand the situation and visualize the internal processes, a visualization module is rendering the names and 3d models at the position of the entities and the areas with their names.
This visualization simplifies the debugging process and allows a faster setup of the framework parameters. This module is designed to create a simple 3d representation of toaster's physical elements in RVIZ.

## Implementation details
To use rviz with TOASTER, follow the configuration instructions at https://github.com/Greg8978/toaster/blob/master/toaster_visualizer/doc/toaster_visualizer_doc.pdf. The figure below, explains the implementation of this module.

![] (https://github.com/Greg8978/toaster/blob/master/doc/LatexSource/img/visualizer.jpg)

## Inputs
It uses the position of the entities published by the data gathering component and the areas published by the area manager component Toaster\_visualizer use informations taken form toaster\_msgs published on specifics ros topics to create markerArray.
toaster\_msgs concerned: AreaList, ObjectList, HumanList
topics concerned: /area\_manager/areaList, /pdg/objList, /pdg/humanList

## Outputs
It publishes markerArray on topics like /toaster\_visualizer/marker\_area, marker\_human, marker\_robot, marker\_motion and marker_objects viewable with RVIZ as shown in images below.

![] (https://writelatex.s3.amazonaws.com/rztjkrqdrypx/uploads/3060/6323907/1.jpg)

![] (https://writelatex.s3.amazonaws.com/rztjkrqdrypx/uploads/2018/6304910/10.jpg)

## Adding markers

To add a marker, you need to add the mesh of your object / agent in the corresponding repository.
You will also need to add the name corresponding to this element in the xml file:


* **environment mesh**: [toaster_visualizer/mesh/toaster_environment](https://github.com/Greg8978/toaster/tree/master/toaster_visualizer/mesh/toaster_environment)  
**xml file**: [toaster_visualizer/src/list_object.xml](https://github.com/Greg8978/toaster/blob/master/toaster_visualizer/src/list_human.xml)  
The name of the object for the environment should be "env".


* **human mesh**: [toaster_visualizer/mesh/toaster_humans](https://github.com/Greg8978/toaster/tree/master/toaster_visualizer/mesh/toaster_humans)  
**xml file**: [toaster_visualizer/src/list_human.xml](https://github.com/Greg8978/toaster/blob/master/toaster_visualizer/src/list_human.xml)


* **robot mesh**: [toaster_visualizer/mesh/toaster_robots](https://github.com/Greg8978/toaster/tree/master/toaster_visualizer/mesh/toaster_robots)  
**xml file**: [toaster_visualizer/src/list_robot.xml](https://github.com/Greg8978/toaster/blob/master/toaster_visualizer/src/list_robot.xml)


* **object mesh**: [toaster_visualizer/mesh/toaster_objects](https://github.com/Greg8978/toaster/tree/master/toaster_visualizer/mesh/toaster_objects)  
**xml file**: [toaster_visualizer/src/list_obj.xml](https://github.com/Greg8978/toaster/blob/master/toaster_visualizer/src/list_obj.xml)


The human and robots available are presented in the picture below

![](https://github.com/Greg8978/toaster/blob/master/doc/media/toasterModels.jpg)

## Future work and possible improvement
In a future work, we would like to improve this visualization by adding the rendering of other facts, such as the one generated by the agent monitoring component about the attention.